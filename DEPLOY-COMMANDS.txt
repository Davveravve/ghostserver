===============================================
GHOST GAMING - VPS DEPLOYMENT
===============================================

STEG 1: SSH till servern
------------------------
ssh root@46.224.197.229

Lösenord: 123456789


STEG 2: Kör detta kommando (kopiera ALLT)
-----------------------------------------

curl -fsSL https://deb.nodesource.com/setup_20.x | bash - && apt-get install -y nodejs && npm install -g pm2 && mkdir -p /var/www && cd /var/www && (if [ -d "ghost" ]; then cd ghost && git pull; else git clone https://github.com/Davveravve/ghostserver.git ghost && cd ghost; fi) && cd /var/www/ghost/web && npm install && npx prisma generate && npm run build && (pm2 delete ghost-web 2>/dev/null || true) && pm2 start npm --name "ghost-web" -- start && pm2 save && pm2 startup


STEG 3: Skapa env-fil
---------------------
Kör detta:

cat > /var/www/ghost/web/.env.local << 'EOF'
DATABASE_URL="mysql://ghost:GhostServer2024@localhost:3306/ghost_gaming"
NEXTAUTH_URL="https://www.ghostservers.site"
NEXTAUTH_SECRET="9oPQqEUNivTzJ8TtFxH7fa8TpKw23rvsJ4Pm8fcL6IQ="
STEAM_API_KEY="341C46892B64FF052CCF3B6E1A69F43E"
PLUGIN_API_KEY="3NULQW7WPpW3ZquX2WzFVyvWx2y09DQEg+JBA4+JVv4="
OWNER_STEAM_ID="76561198295991343"
EOF


STEG 4: Nginx setup
-------------------
Kör detta:

apt-get install -y nginx && cat > /etc/nginx/sites-available/ghost << 'NGINX'
server {
    listen 80;
    server_name www.ghostservers.site ghostservers.site;
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
NGINX
ln -sf /etc/nginx/sites-available/ghost /etc/nginx/sites-enabled/ && rm -f /etc/nginx/sites-enabled/default && nginx -t && systemctl reload nginx && ufw allow 80/tcp && ufw allow 443/tcp


STEG 5: Lägg till dina API-nycklar
----------------------------------
nano /var/www/ghost/web/.env.local

Verifiera att det står:
- STEAM_API_KEY="341C46892B64FF052CCF3B6E1A69F43E"
- OWNER_STEAM_ID="76561198295991343"

Spara: Ctrl+X, Y, Enter


STEG 6: Starta om
-----------------
pm2 restart ghost-web


STEG 7: SSL certifikat
----------------------
apt install -y certbot python3-certbot-nginx && certbot --nginx -d www.ghostservers.site -d ghostservers.site


STEG 8: DNS i Namecheap
-----------------------
Logga in på Namecheap och ändra:
- www A record -> 46.224.197.229
- @ A record -> 46.224.197.229
(Ta bort CNAME till Vercel om det finns)


===============================================
VANLIGA KOMMANDON
===============================================

Se status:
pm2 status

Se loggar:
pm2 logs ghost-web

Starta om:
pm2 restart ghost-web

Uppdatera kod:
cd /var/www/ghost && git pull && cd web && npm install && npm run build && pm2 restart ghost-web

